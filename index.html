<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FEE XMD - Secure Deploy Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* CSS yako ya awali inabaki sawa - nimeongeza hizi classes tu */

        :root {
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --secondary: #06b6d4;
            --accent: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --background: #0f172a;
            --surface: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --gradient-hover: linear-gradient(135deg, var(--primary-dark) 0%, var(--accent) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER - IMPROVED */
        .header {
            text-align: center;
            padding: 3rem 0 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .logo-icon {
            width: 70px;
            height: 70px;
            background: var(--gradient);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 12px 35px rgba(124, 58, 237, 0.4); }
        }

        .logo h1 {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .tagline {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            line-height: 1.7;
            padding: 0 20px;
        }

        /* STATUS BADGE - IMPROVED */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            margin-top: 1rem;
            border: 1px solid rgba(16, 185, 129, 0.3);
            backdrop-filter: blur(10px);
        }

        /* GITHUB VERIFICATION - IMPROVED LAYOUT */
        .verification-section {
            background: rgba(30, 41, 59, 0.85);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2.5rem auto;
            max-width: 850px;
            border: 2px solid rgba(124, 58, 237, 0.25);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .verification-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .section-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .section-header h2 {
            font-size: 2.2rem;
            color: white;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .section-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .verification-step {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 25px;
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.6) 0%, rgba(30, 41, 59, 0.3) 100%);
            border-radius: 16px;
            border: 1px solid rgba(124, 58, 237, 0.2);
            align-items: start;
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
            flex-shrink: 0;
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.3);
        }

        .step-content h4 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .step-content p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* VERIFICATION INPUT - IMPROVED */
        .verification-input {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            margin: 2.5rem 0;
            align-items: start;
        }

        @media (max-width: 768px) {
            .verification-input {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            position: relative;
        }

        .input-group i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        input[type="text"] {
            width: 100%;
            padding: 1.2rem 1.5rem 1.2rem 3.5rem;
            border-radius: 14px;
            border: 2px solid rgba(124, 58, 237, 0.3);
            background: rgba(15, 23, 42, 0.9);
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.15);
            background: rgba(15, 23, 42, 0.95);
        }

        /* BUTTONS - COMPLETELY REDESIGNED */
        .btn {
            padding: 1.2rem 2.5rem;
            border-radius: 14px;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            min-width: 180px;
            height: 56px;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--gradient-hover);
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.4);
        }

        .btn-secondary {
            background: rgba(124, 58, 237, 0.12);
            color: var(--text-primary);
            border: 2px solid rgba(124, 58, 237, 0.5);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(124, 58, 237, 0.2);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.25);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* PLATFORMS SECTION - REDESIGNED LAYOUT */
        .platforms-section {
            margin: 4rem 0;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 1.5rem;
            color: white;
            position: relative;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: var(--gradient);
            border-radius: 2px;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 3rem;
            line-height: 1.7;
        }

        /* PLATFORMS GRID - IMPROVED */
        .platforms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }

        .platform-card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.6) 100%);
            border-radius: 20px;
            padding: 2.5rem;
            border: 2px solid rgba(124, 58, 237, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .platform-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .platform-card:hover {
            border-color: rgba(124, 58, 237, 0.6);
            transform: translateY(-10px);
            box-shadow: 0 25px 60px rgba(124, 58, 237, 0.25);
        }

        .platform-card:hover::before {
            opacity: 1;
        }

        .platform-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 1.5rem;
        }

        .platform-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
        }

        .heroku-icon { background: linear-gradient(135deg, #6762A6 0%, #8B84C5 100%); }
        .railway-icon { background: linear-gradient(135deg, #0B0D0E 0%, #2D3436 100%); }
        .render-icon { background: linear-gradient(135deg, #46E3B7 0%, #6BFFD6 100%); color: #0f172a !important; }
        .koyeb-icon { background: linear-gradient(135deg, #121212 0%, #2D2D2D 100%); }
        .replit-icon { background: linear-gradient(135deg, #667881 0%, #8A9BA8 100%); }

        .platform-title {
            font-size: 1.6rem;
            color: white;
            margin: 0;
        }

        .status-tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            width: fit-content;
        }

        .status-success { background: rgba(16, 185, 129, 0.15); color: var(--accent); border: 1px solid rgba(16, 185, 129, 0.3); }
        .status-warning { background: rgba(245, 158, 11, 0.15); color: var(--warning); border: 1px solid rgba(245, 158, 11, 0.3); }

        .platform-desc {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            font-size: 1rem;
            line-height: 1.7;
            flex-grow: 1;
        }

        .platform-features {
            list-style: none;
            margin: 1.5rem 0;
            padding: 0;
        }

        .platform-features li {
            padding: 0.8rem 0;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }

        .platform-features li i {
            color: var(--accent);
            font-size: 1rem;
            width: 20px;
        }

        .card-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: auto;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(124, 58, 237, 0.1);
        }

        @media (max-width: 480px) {
            .card-actions {
                grid-template-columns: 1fr;
            }
        }

        /* MODALS - IMPROVED */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--surface);
            border-radius: 24px;
            padding: 3rem;
            max-width: 700px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            border: 2px solid var(--primary);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(124, 58, 237, 0.1);
            border: 2px solid rgba(124, 58, 237, 0.3);
            color: var(--text-secondary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: rgba(124, 58, 237, 0.2);
            color: white;
            border-color: var(--primary);
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: white;
            padding-right: 40px;
        }

        /* INSTRUCTIONS - IMPROVED */
        .instructions {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.6) 0%, rgba(30, 41, 59, 0.3) 100%);
            border-radius: 16px;
            border-left: 4px solid var(--primary);
        }

        .instructions h4 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .instructions ol {
            padding-left: 1.5rem;
            margin: 1rem 0;
        }

        .instructions li {
            margin: 1rem 0;
            color: var(--text-secondary);
            line-height: 1.7;
            padding-left: 0.5rem;
        }

        .instructions code {
            background: rgba(124, 58, 237, 0.15);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
        }

        /* RESULT MESSAGES - IMPROVED */
        #verificationResult {
            margin: 2rem 0;
            min-height: 60px;
        }

        .result-message {
            padding: 1.5rem;
            border-radius: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.5s ease;
            border: 1px solid transparent;
        }

        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .result-success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .result-error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .result-warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .result-info {
            background: rgba(6, 182, 212, 0.15);
            color: var(--secondary);
            border-color: rgba(6, 182, 212, 0.3);
        }

        .result-loading {
            background: rgba(124, 58, 237, 0.15);
            color: var(--primary);
            border-color: rgba(124, 58, 237, 0.3);
        }

        /* FORK MODAL - IMPROVED */
        .fork-modal-content {
            text-align: center;
            padding: 1rem;
        }

        .fork-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            display: inline-block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .fork-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 2.5rem;
            flex-wrap: wrap;
        }

        /* FOOTER - IMPROVED */
        .footer {
            text-align: center;
            padding: 4rem 0 2rem;
            color: var(--text-secondary);
            border-top: 1px solid rgba(124, 58, 237, 0.2);
            margin-top: 4rem;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .footer h3 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .contact-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .contact-links a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            border: 2px solid rgba(124, 58, 237, 0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .contact-links a:hover {
            background: rgba(124, 58, 237, 0.1);
            color: white;
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .footer-info {
            margin-top: 2rem;
            font-size: 0.95rem;
            opacity: 0.8;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .logo h1 { font-size: 2.5rem; }
            .logo-icon { width: 60px; height: 60px; font-size: 28px; }
            .section-title { font-size: 2rem; }
            .verification-section { padding: 1.5rem; margin: 1.5rem auto; }
            .platforms-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            .platform-card { padding: 2rem; }
            .modal-content { padding: 2rem; }
            .btn { padding: 1rem 2rem; min-width: 160px; }
        }

        @media (max-width: 480px) {
            .logo { flex-direction: column; gap: 15px; text-align: center; }
            .logo h1 { font-size: 2rem; }
            .section-title { font-size: 1.8rem; }
            .verification-step { grid-template-columns: 1fr; text-align: center; }
            .step-number { margin: 0 auto; }
            .contact-links { flex-direction: column; align-items: center; }
            .contact-links a { width: 100%; max-width: 300px; justify-content: center; }
        }

        /* LOADING ANIMATION */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(124, 58, 237, 0.3);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* NEW: Multi-step verification */
        .verification-steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        @media (max-width: 768px) {
            .verification-steps {
                grid-template-columns: 1fr;
            }
        }

        .verification-step-card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.6) 100%);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            border: 2px solid rgba(124, 58, 237, 0.2);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .verification-step-card.active {
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.25);
        }

        .verification-step-card.completed {
            border-color: var(--accent);
            background: linear-gradient(145deg, rgba(16, 185, 129, 0.1) 0%, rgba(30, 41, 59, 0.6) 100%);
        }

        .step-indicator {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }

        .verification-step-card.completed .step-indicator {
            background: var(--accent);
        }

        .step-title {
            font-size: 1.1rem;
            color: white;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .step-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .step-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 1rem;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .status-success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-failed {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* NEW: Account verification section */
        .account-verification {
            background: rgba(30, 41, 59, 0.85);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2.5rem auto;
            max-width: 850px;
            border: 2px solid rgba(124, 58, 237, 0.25);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .verification-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .verification-method {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 2px solid rgba(124, 58, 237, 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .verification-method:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .verification-method i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .method-title {
            font-size: 1.1rem;
            color: white;
            margin-bottom: 0.5rem;
        }

        .method-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* NEW: Cloudy Dashboard Styles */
        .cloudy-dashboard {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .cloudy-dashboard.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .user-welcome {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
            border-radius: 20px;
            margin-bottom: 2rem;
            border: 2px solid rgba(124, 58, 237, 0.3);
        }

        .user-avatar {
            width: 100px;
            height: 100px;
            background: var(--gradient);
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
        }

        .user-info {
            margin-top: 1.5rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0.5rem 0;
            color: var(--text-secondary);
        }

        .info-item strong {
            color: white;
            min-width: 120px;
            text-align: right;
        }

        /* NEW: Security measures */
        .security-alert {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .security-alert.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .security-alert.success {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }

        /* NEW: Loading states */
        .verification-loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .verification-loading.active {
            display: block;
        }

        .verification-loading .loader {
            width: 50px;
            height: 50px;
            border-width: 4px;
            margin: 0 auto 1rem;
        }

        /* NEW: Session verification */
        .session-info {
            background: rgba(124, 58, 237, 0.1);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid rgba(124, 58, 237, 0.3);
        }

        .session-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(124, 58, 237, 0.2);
        }

        .session-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- STAGE 1: INITIAL VERIFICATION DASHBOARD -->
        <div id="initialDashboard" class="deploy-dashboard">
            <!-- HEADER -->
            <header class="header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h1>FEE XMD Secure Deploy</h1>
                </div>
                <p class="tagline">
                    Secure deployment with multi-stage verification. Prevent bot accounts and ensure only authorized users can deploy.
                </p>
                <div class="status-badge">
                    <i class="fas fa-user-shield"></i> Multi-factor Verification Required
                </div>
            </header>

            <!-- MULTI-STEP VERIFICATION -->
            <section class="verification-section">
                <div class="section-header">
                    <h2><i class="fas fa-layer-group"></i> 3-Step Verification Process</h2>
                    <p>
                        Complete all verification steps to access deployment. Each step prevents unauthorized access.
                    </p>
                </div>

                <div class="verification-steps">
                    <!-- Step 1: GitHub Account -->
                    <div class="verification-step-card active" id="step1">
                        <div class="step-indicator">1</div>
                        <div class="step-title">GitHub Account</div>
                        <div class="step-desc">Verify your GitHub account exists and is active</div>
                        <div class="step-status status-pending">
                            <i class="fas fa-clock"></i> Pending
                        </div>
                    </div>

                    <!-- Step 2: Repository Fork -->
                    <div class="verification-step-card" id="step2">
                        <div class="step-indicator">2</div>
                        <div class="step-title">Repository Fork</div>
                        <div class="step-desc">Confirm you have forked the repository</div>
                        <div class="step-status status-pending">
                            <i class="fas fa-clock"></i> Pending
                        </div>
                    </div>

                    <!-- Step 3: Session Verification -->
                    <div class="verification-step-card" id="step3">
                        <div class="step-indicator">3</div>
                        <div class="step-title">Session Verification</div>
                        <div class="step-desc">Verify you own the GitHub account</div>
                        <div class="step-status status-pending">
                            <i class="fas fa-clock"></i> Pending
                        </div>
                    </div>
                </div>

                <!-- GITHUB VERIFICATION INPUT -->
                <div class="verification-input">
                    <div class="input-group">
                        <i class="fab fa-github"></i>
                        <input type="text" id="githubUsername" placeholder="Enter your REAL GitHub username" autocomplete="off">
                    </div>
                    <button class="btn btn-primary" id="startVerificationBtn">
                        <i class="fas fa-play-circle"></i> Start Verification
                    </button>
                </div>

                <!-- VERIFICATION LOADING -->
                <div class="verification-loading" id="verificationLoading">
                    <div class="loader"></div>
                    <p style="margin-top: 1rem; color: var(--text-secondary);">
                        Verifying account security... Please wait
                    </p>
                </div>

                <!-- VERIFICATION RESULT -->
                <div id="verificationResult"></div>

                <!-- SECURITY ALERT -->
                <div class="security-alert warning" id="securityAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>Security Notice:</strong> We verify that YOU are the actual owner of the GitHub account.
                        Bot accounts and unauthorized users will be blocked.
                    </div>
                </div>

                <!-- ACCOUNT VERIFICATION METHODS -->
                <div class="account-verification" id="accountVerification" style="display: none;">
                    <div class="section-header">
                        <h2><i class="fas fa-fingerprint"></i> Account Ownership Verification</h2>
                        <p>
                            Prove you own this GitHub account. Choose one verification method:
                        </p>
                    </div>

                    <div class="verification-methods">
                        <div class="verification-method" onclick="verifyViaRecentActivity()">
                            <i class="fas fa-history"></i>
                            <div class="method-title">Recent Activity</div>
                            <div class="method-desc">Check your recent GitHub activity</div>
                            <div class="status-tag status-pending">
                                <i class="fas fa-clock"></i> Verify
                            </div>
                        </div>

                        <div class="verification-method" onclick="verifyViaProfileData()">
                            <i class="fas fa-user-circle"></i>
                            <div class="method-title">Profile Data</div>
                            <div class="method-desc">Verify account creation date & bio</div>
                            <div class="status-tag status-pending">
                                <i class="fas fa-clock"></i> Verify
                            </div>
                        </div>

                        <div class="verification-method" onclick="verifyViaRepository()">
                            <i class="fas fa-code-branch"></i>
                            <div class="method-title">Repository Check</div>
                            <div class="method-desc">Verify repositories match patterns</div>
                            <div class="status-tag status-pending">
                                <i class="fas fa-clock"></i> Verify
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PLATFORMS SECTION (Hidden until verified) -->
            <section class="platforms-section" id="platformsSection" style="display: none;">
                <h2 class="section-title">Verified Deployment Platforms</h2>
                <p class="section-subtitle">
                    You're now verified! Choose your preferred deployment platform.
                </p>

                <div class="platforms-grid">
                    <!-- Platforms same as before... -->
                    <!-- HEROKU CARD -->
                    <div class="platform-card">
                        <div class="platform-header">
                            <div class="platform-icon heroku-icon">
                                <i class="fab fa-heroku"></i>
                            </div>
                            <h3 class="platform-title">Heroku</h3>
                        </div>
                        <div class="status-tag status-success">
                            <i class="fas fa-check-circle"></i> Ready to Deploy
                        </div>
                        <p class="platform-desc">
                            Popular platform with easy one-click deployment.
                        </p>
                        <ul class="platform-features">
                            <li><i class="fas fa-check-circle"></i> Free tier available</li>
                            <li><i class="fas fa-check-circle"></i> Auto-deploy from GitHub</li>
                            <li><i class="fas fa-check-circle"></i> PostgreSQL included</li>
                        </ul>
                        <div class="card-actions">
                            <button class="btn btn-secondary" onclick="showInstructions('heroku')">
                                <i class="fas fa-book"></i> Instructions
                            </button>
                            <button class="btn btn-primary" onclick="deployTo('heroku')" id="herokuBtn">
                                <i class="fas fa-rocket"></i> Deploy Now
                            </button>
                        </div>
                    </div>

                    <!-- Add other platforms similarly... -->
                <!-- RAILWAY -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-icon railway-icon">
                            <i class="fas fa-train"></i>
                        </div>
                        <h3 class="platform-title">Railway</h3>
                    </div>
                    <div class="status-tag status-success">
                        <i class="fas fa-bolt"></i> Fast & Reliable
                    </div>
                    <p class="platform-desc">
                        Modern platform with generous free tier. Perfect for WhatsApp bots with always-on
                        capability and instant deployment.
                    </p>
                    <ul class="platform-features">
                        <li><i class="fas fa-check-circle"></i> Always-on free tier</li>
                        <li><i class="fas fa-check-circle"></i> Instant deployment</li>
                        <li><i class="fas fa-check-circle"></i> Built-in MongoDB</li>
                        <li><i class="fas fa-check-circle"></i> Auto HTTPS/SSL</li>
                        <li><i class="fas fa-check-circle"></i> Real-time monitoring</li>
                    </ul>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="showInstructions('railway')">
                            <i class="fas fa-book"></i> Instructions
                        </button>
                        <button class="btn btn-primary" onclick="deployTo('railway')" disabled id="railwayBtn">
                            <i class="fas fa-rocket"></i> Deploy Now
                        </button>
                    </div>
                </div>

                <!-- RENDER -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-icon render-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <h3 class="platform-title">Render</h3>
                    </div>
                    <div class="status-tag status-warning">
                        <i class="fas fa-clock"></i> Sleeps after inactivity
                    </div>
                    <p class="platform-desc">
                        Simple and reliable platform with free web services. Great for starting out with
                        WhatsApp bots and testing.
                    </p>
                    <ul class="platform-features">
                        <li><i class="fas fa-check-circle"></i> Free Web Services</li>
                        <li><i class="fas fa-check-circle"></i> Custom domains</li>
                        <li><i class="fas fa-check-circle"></i> Auto SSL certificates</li>
                        <li><i class="fas fa-check-circle"></i> GitHub integration</li>
                        <li><i class="fas fa-check-circle"></i> Simple dashboard</li>
                    </ul>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="showInstructions('render')">
                            <i class="fas fa-book"></i> Instructions
                        </button>
                        <button class="btn btn-primary" onclick="deployTo('render')" disabled id="renderBtn">
                            <i class="fas fa-rocket"></i> Deploy Now
                        </button>
                    </div>
                </div>

                <!-- KOYEB -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-icon koyeb-icon">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <h3 class="platform-title">Koyeb</h3>
                    </div>
                    <div class="status-tag status-success">
                        <i class="fas fa-star"></i> Always free tier
                    </div>
                    <p class="platform-desc">
                        European platform with 2 always-free instances. No credit card required for free
                        tier - perfect for production use.
                    </p>
                    <ul class="platform-features">
                        <li><i class="fas fa-check-circle"></i> 2 always-free instances</li>
                        <li><i class="fas fa-check-circle"></i> Global edge network</li>
                        <li><i class="fas fa-check-circle"></i> Native Docker support</li>
                        <li><i class="fas fa-check-circle"></i> Auto scaling</li>
                        <li><i class="fas fa-check-circle"></i> No credit card required</li>
                    </ul>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="showInstructions('koyeb')">
                            <i class="fas fa-book"></i> Instructions
                        </button>
                        <button class="btn btn-primary" onclick="deployTo('koyeb')" disabled id="koyebBtn">
                            <i class="fas fa-rocket"></i> Deploy Now
                        </button>
                    </div>
                </div>

                <!-- REPLIT -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-icon replit-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3 class="platform-title">Replit</h3>
                    </div>
                    <div class="status-tag status-warning">
                        <i class="fas fa-laptop-code"></i> Developer friendly
                    </div>
                    <p class="platform-desc">
                        Cloud IDE with integrated hosting. Perfect for testing, development, and live
                        code editing with instant preview.
                    </p>
                    <ul class="platform-features">
                        <li><i class="fas fa-check-circle"></i> Built-in code editor</li>
                        <li><i class="fas fa-check-circle"></i> Always-on available</li>
                        <li><i class="fas fa-check-circle"></i> Team collaboration</li>
                        <li><i class="fas fa-check-circle"></i> Instant preview</li>
                        <li><i class="fas fa-check-circle"></i> Live coding</li>
                    </ul>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="showInstructions('replit')">
                            <i class="fas fa-book"></i> Instructions
                        </button>
                        <button class="btn btn-primary" onclick="deployTo('replit')" disabled id="replitBtn">
                            <i class="fas fa-rocket"></i> Deploy Now
                        </button>
                    </div>
                </div>
            </div>



                </div>
            </section>

            <!-- FOOTER -->
            <footer class="footer">
                <h3>Need Verification Help?</h3>
                <div class="contact-links">
                    <a href="https://wa.me/255764182801" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp Support
                    </a>
                    <a href="https://github.com/Fred1e/Fee-Xmd/issues" target="_blank">
                        <i class="fab fa-github"></i> GitHub Issues
                    </a>
                    <a href="mailto:frediezra360@gmail.com">
                        <i class="fas fa-envelope"></i> Email Support
                    </a>
                </div>
            </footer>
        </div>

        <!-- STAGE 2: CLOUDY DASHBOARD (Shows after successful verification) -->
        <div id="cloudyDashboard" class="cloudy-dashboard">
            <!-- CLOUDY DASHBOARD HEADER -->
            <header class="header">
                <div class="logo">
                    <div class="logo-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <h1>Cloudy Dashboard</h1>
                </div>
                <p class="tagline">
                    Welcome to your personalized deployment dashboard. Manage your bot deployment and settings.
                </p>
                <div class="status-badge">
                    <i class="fas fa-user-check"></i> Verified User: <span id="verifiedUsername">Loading...</span>
                </div>
            </header>

            <!-- USER WELCOME SECTION -->
            <section class="user-welcome">
                <div class="user-avatar">
                    <i class="fas fa-user-tie"></i>
                </div>
                <h2 style="color: white; margin-bottom: 1rem;">Welcome, <span id="welcomeUsername">GitHub User</span>!</h2>
                <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto;">
                    Your account has been successfully verified. You now have access to all deployment features.
                </p>

                <div class="user-info">
                    <div class="info-item">
                        <strong>GitHub Account:</strong>
                        <span id="userGithubLink">Loading...</span>
                    </div>
                    <div class="info-item">
                        <strong>Verification Status:</strong>
                        <span class="status-tag status-success" style="margin: 0;">
                            <i class="fas fa-shield-check"></i> Fully Verified
                        </span>
                    </div>
                    <div class="info-item">
                        <strong>Session ID:</strong>
                        <span id="sessionId" style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px;">Loading...</span>
                    </div>
                </div>
            </section>

            <!-- DEPLOYMENT MANAGEMENT -->
            <section class="verification-section">
                <div class="section-header">
                    <h2><i class="fas fa-rocket"></i> Deployment Management</h2>
                    <p>
                        Manage your bot deployment across different platforms.
                    </p>
                </div>

                <!-- SESSION INFO -->
                <div class="session-info">
                    <h4 style="color: white; margin-bottom: 1rem;"><i class="fas fa-info-circle"></i> Session Information</h4>
                    <div class="session-item">
                        <span>Verification Timestamp:</span>
                        <span id="verificationTime">Loading...</span>
                    </div>
                    <div class="session-item">
                        <span>Session Expires:</span>
                        <span id="sessionExpiry">Loading...</span>
                    </div>
                    <div class="session-item">
                        <span>Fork Status:</span>
                        <span class="status-tag status-success" style="margin: 0;">
                            <i class="fas fa-code-branch"></i> Active Fork
                        </span>
                    </div>
                </div>

                <!-- DEPLOYMENT ACTIONS -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="manageDeployment()">
                        <i class="fas fa-cogs"></i> Manage Deployment
                    </button>
                    <button class="btn btn-secondary" onclick="viewFork()">
                        <i class="fab fa-github"></i> View Fork
                    </button>
                    <button class="btn btn-secondary" onclick="showSettings()">
                        <i class="fas fa-sliders-h"></i> Settings
                    </button>
                    <button class="btn btn-secondary" onclick="resetSession()">
                        <i class="fas fa-redo"></i> Reset Session
                    </button>
                </div>
            </section>

            <!-- DEPLOYMENT PLATFORMS -->
            <section class="platforms-section">
                <h2 class="section-title">Deployment Platforms</h2>
                <p class="section-subtitle">
                    Choose where to deploy your verified bot instance.
                </p>

                <div class="platforms-grid">
                    <!-- All platform cards from before, but now enabled -->
                    <!-- HEROKU CARD -->
                    <div class="platform-card">
                        <div class="platform-header">
                            <div class="platform-icon heroku-icon">
                                <i class="fab fa-heroku"></i>
                            </div>
                            <h3 class="platform-title">Heroku</h3>
                        </div>
                        <div class="status-tag status-success">
                            <i class="fas fa-check-circle"></i> Ready
                        </div>
                        <p class="platform-desc">
                            Deploy your bot to Heroku's cloud platform.
                        </p>
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="deployToPlatform('heroku')">
                                <i class="fas fa-rocket"></i> Deploy to Heroku
                            </button>
                        </div>
                    </div>
                    
                       <!-- RAILWAY CARD -->
                    <div class="platform-card">
                        <div class="platform-header">
                            <div class="platform-icon railway-icon">
                                <i class="fas fa-train"></i>
                            </div>
                            <h3 class="platform-title">Railway</h3>
                        </div>
                        <div class="status-tag status-success">
                            <i class="fas fa-check-circle"></i> Ready
                        </div>
                        <p class="platform-desc">
                            Modern platform with always-on capability.
                        </p>
                        <div class="card-actions">
                            <button class="btn btn-primary" onclick="deployToPlatform('railway')">
                                <i class="fas fa-rocket"></i> Deploy to Railway
                            </button>
                        </div>
                    </div>

                    <!-- Add other platforms similarly... -->
                </div>
            </section>
        </div>
    </div>

    <!-- MODALS -->
    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h3 class="modal-title">Deployment Instructions</h3>
            <div id="modalContent"></div>
        </div>
    </div>

    <div id="verificationModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <div id="verificationModalContent"></div>
        </div>
    </div>

<script>
    // ENHANCED VERIFICATION SYSTEM WITH MULTI-LAYER SECURITY
    // No demo mode, no bypass - real verification only

    // STATE MANAGEMENT
    let verificationState = {
        currentUser: null,
        userData: null,
        verificationStep: 1,
        stepsCompleted: {
            step1: false, // GitHub account exists
            step2: false, // Repository forked
            step3: false  // Session verified
        },
        sessionToken: null,
        verificationMethod: null,
        securityChecks: []
    };

    // SECURITY CONFIGURATION
    const SECURITY_CONFIG = {
        minAccountAge: 30, // days
        minRepos: 1,
        minFollowers: 0,
        minFollowing: 0,
        requiredPatterns: ['bot', 'whatsapp', 'fee', 'xmd'],
        blockPatterns: ['bot', 'spam', 'test', 'fake', 'dummy'],
        maxAttempts: 3,
        timeBetweenAttempts: 30000 // 30 seconds
    };

    // REPOSITORY INFO
    const REPO_OWNER = 'Fred1e';
    const REPO_NAME = 'Fee-Xmd';
    const CORS_PROXY = 'https://corsproxy.io/?';
    
    // SESSION MANAGEMENT
    const SESSION_DURATION = 2 * 60 * 60 * 1000; // 2 hours

    // DOM ELEMENTS
    const initialDashboard = document.getElementById('initialDashboard');
    const cloudyDashboard = document.getElementById('cloudyDashboard');
    const startVerificationBtn = document.getElementById('startVerificationBtn');
    const verificationLoading = document.getElementById('verificationLoading');
    const verificationResult = document.getElementById('verificationResult');
    const platformsSection = document.getElementById('platformsSection');
    const accountVerification = document.getElementById('accountVerification');

    // SHOW RESULT MESSAGE
    function showResult(message, type = 'info') {
        const types = {
            success: { icon: 'fas fa-check-circle', class: 'result-success' },
            error: { icon: 'fas fa-exclamation-circle', class: 'result-error' },
            warning: { icon: 'fas fa-exclamation-triangle', class: 'result-warning' },
            info: { icon: 'fas fa-info-circle', class: 'result-info' },
            loading: { icon: 'fas fa-spinner fa-spin', class: 'result-loading' }
        };

        const config = types[type] || types.info;

        verificationResult.innerHTML = `
            <div class="result-message ${config.class}">
                <i class="${config.icon}"></i>
                <span>${message}</span>
            </div>
        `;
    }

    // UPDATE VERIFICATION STEP UI
    function updateStepUI(step, status) {
        const stepElement = document.getElementById(`step${step}`);
        const statusElement = stepElement.querySelector('.step-status');
        
        stepElement.classList.remove('active');
        stepElement.classList.remove('completed');
        
        if (status === 'completed') {
            stepElement.classList.add('completed');
            statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Verified';
            statusElement.className = 'step-status status-success';
            verificationState.stepsCompleted[`step${step}`] = true;
        } else if (status === 'active') {
            stepElement.classList.add('active');
            statusElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            statusElement.className = 'step-status status-pending';
        } else if (status === 'failed') {
            statusElement.innerHTML = '<i class="fas fa-times-circle"></i> Failed';
            statusElement.className = 'step-status status-failed';
        }
    }

    // START MULTI-STEP VERIFICATION
    async function startVerification() {
        const username = document.getElementById('githubUsername').value.trim();

        if (!username) {
            showResult('Please enter your GitHub username', 'error');
            return;
        }

        // Basic username validation
        if (!/^[a-zA-Z0-9](?:[a-zA-Z0-9]|-(?=[a-zA-Z0-9])){0,38}$/.test(username)) {
            showResult('Invalid GitHub username format', 'error');
            return;
        }

        // Reset state for new verification
        verificationState.currentUser = username;
        verificationState.verificationStep = 1;
        verificationState.stepsCompleted = { step1: false, step2: false, step3: false };
        verificationState.securityChecks = [];

        // Show loading
        startVerificationBtn.disabled = true;
        verificationLoading.classList.add('active');
        updateStepUI(1, 'active');
        showResult('Starting verification process...', 'loading');

        try {
            // STEP 1: Verify GitHub account exists and is legitimate
            await verifyGitHubAccount(username);
            
            if (!verificationState.stepsCompleted.step1) {
                throw new Error('Account verification failed');
            }

            // STEP 2: Check repository fork
            await verifyRepositoryFork(username);
            
            if (!verificationState.stepsCompleted.step2) {
                throw new Error('Repository fork verification failed');
            }

            // STEP 3: Show account verification methods
            showAccountVerificationMethods();
            updateStepUI(3, 'active');

        } catch (error) {
            console.error('Verification error:', error);
            showResult(`Verification failed: ${error.message}`, 'error');
            resetVerificationUI();
        } finally {
            verificationLoading.classList.remove('active');
            startVerificationBtn.disabled = false;
        }
    }

    // STEP 1: Verify GitHub Account (Enhanced)
    async function verifyGitHubAccount(username) {
        showResult('Verifying GitHub account legitimacy...', 'loading');

        try {
            // Check account exists
            const userUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/users/${username}`)}`;
            const userRes = await fetch(userUrl);

            if (!userRes.ok) {
                if (userRes.status === 404) {
                    throw new Error('GitHub account not found');
                }
                throw new Error(`GitHub API error: ${userRes.status}`);
            }

            const userData = await userRes.json();
            verificationState.userData = userData;

            // SECURITY CHECKS
            const securityChecks = [];

            // Check 1: Account age
            const createdAt = new Date(userData.created_at);
            const accountAgeDays = (new Date() - createdAt) / (1000 * 60 * 60 * 24);
            securityChecks.push({
                name: 'Account Age',
                passed: accountAgeDays >= SECURITY_CONFIG.minAccountAge,
                value: `${Math.floor(accountAgeDays)} days`,
                required: `${SECURITY_CONFIG.minAccountAge} days minimum`
            });

            // Check 2: Check for suspicious patterns in username
            const suspiciousPatterns = SECURITY_CONFIG.blockPatterns;
            const hasSuspiciousPattern = suspiciousPatterns.some(pattern => 
                username.toLowerCase().includes(pattern.toLowerCase())
            );
            securityChecks.push({
                name: 'Username Check',
                passed: !hasSuspiciousPattern,
                value: username,
                required: 'No suspicious patterns'
            });

            // Check 3: Check if account has any activity
            const hasRepos = userData.public_repos > 0;
            const hasFollowers = userData.followers > 0;
            const hasFollowing = userData.following > 0;
            
            securityChecks.push({
                name: 'Account Activity',
                passed: hasRepos || hasFollowers || hasFollowing,
                value: `${userData.public_repos} repos, ${userData.followers} followers`,
                required: 'Some activity present'
            });

            // Store security checks
            verificationState.securityChecks = securityChecks;

            // Calculate overall security score
            const passedChecks = securityChecks.filter(check => check.passed).length;
            const totalChecks = securityChecks.length;
            const securityScore = (passedChecks / totalChecks) * 100;

            if (securityScore < 50) {
                throw new Error('Account failed security checks. This may be a bot or fake account.');
            }

            updateStepUI(1, 'completed');
            verificationState.stepsCompleted.step1 = true;
            
            showResult(` Account verified: ${username} (${Math.floor(securityScore)}% security score)`, 'success');
            
            // Show security details
            setTimeout(() => {
                showSecurityDetails(securityChecks);
            }, 1000);

        } catch (error) {
            updateStepUI(1, 'failed');
            throw error;
        }
    }

    // STEP 2: Verify Repository Fork
    async function verifyRepositoryFork(username) {
        showResult('Checking repository fork status...', 'loading');
        updateStepUI(2, 'active');

        try {
            // Method 1: Check user's repositories for our fork
            const reposUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/users/${username}/repos?per_page=100&sort=updated`)}`;
            const reposRes = await fetch(reposUrl);

            if (!reposRes.ok) {
                throw new Error('Cannot fetch user repositories');
            }

            const userRepos = await reposRes.json();
            let forkFound = null;

            // Look for a fork of our repository
            for (const repo of userRepos) {
                if (repo.fork && repo.parent) {
                    if (repo.parent.full_name.toLowerCase() === `${REPO_OWNER}/${REPO_NAME}`.toLowerCase()) {
                        forkFound = repo;
                        break;
                    }
                }
            }

            if (!forkFound) {
                // Method 2: Check all forks of our repository
                const forksUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/forks`)}`;
                const forksRes = await fetch(forksUrl);
                
                if (forksRes.ok) {
                    const allForks = await forksRes.json();
                    forkFound = allForks.find(fork => fork.owner.login.toLowerCase() === username.toLowerCase());
                }
            }

            if (forkFound) {
                // Additional verification: Check if fork has recent activity
                const forkCommitsUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/repos/${username}/${REPO_NAME}/commits`)}`;
                const commitsRes = await fetch(forkCommitsUrl);
                
                if (commitsRes.ok) {
                    const commits = await commitsRes.json();
                    const hasRecentCommits = commits.length > 0;
                    
                    securityChecks.push({
                        name: 'Fork Activity',
                        passed: hasRecentCommits,
                        value: hasRecentCommits ? `${commits.length} commits` : 'No recent activity',
                        required: 'Active fork'
                    });
                }

                updateStepUI(2, 'completed');
                verificationState.stepsCompleted.step2 = true;
                
                showResult(` Repository fork verified: ${forkFound.full_name}`, 'success');
                
                // Store fork info
                verificationState.userData.fork = forkFound;
                
            } else {
                throw new Error('Repository not forked. Please fork the repository first.');
            }

        } catch (error) {
            updateStepUI(2, 'failed');
            throw error;
        }
    }

    // STEP 3: Account Ownership Verification Methods
    function showAccountVerificationMethods() {
        accountVerification.style.display = 'block';
        showResult('Choose a method to verify account ownership:', 'info');
    }

    // VERIFICATION METHOD 1: Recent Activity
    async function verifyViaRecentActivity() {
        showResult('Checking recent GitHub activity...', 'loading');
        verificationState.verificationMethod = 'recent_activity';

        try {
            const eventsUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/users/${verificationState.currentUser}/events`)}`;
            const eventsRes = await fetch(eventsUrl);

            if (!eventsRes.ok) {
                throw new Error('Cannot fetch activity data');
            }

            const events = await eventsRes.json();
            
            // Analyze activity patterns
            const recentEvents = events.slice(0, 10);
            const hasRecentActivity = recentEvents.length > 0;
            const activityTypes = [...new Set(recentEvents.map(event => event.type))];
            
            const activityCheck = {
                name: 'Recent Activity',
                passed: hasRecentActivity,
                value: hasRecentActivity ? `${recentEvents.length} recent events` : 'No recent activity',
                details: activityTypes.join(', ')
            };

            verificationState.securityChecks.push(activityCheck);

            if (hasRecentActivity) {
                completeVerification();
            } else {
                showResult('No recent activity found. Try another verification method.', 'warning');
            }

        } catch (error) {
            showResult('Failed to check activity. Try another method.', 'error');
        }
    }

    // VERIFICATION METHOD 2: Profile Data
    async function verifyViaProfileData() {
        showResult('Verifying profile information...', 'loading');
        verificationState.verificationMethod = 'profile_data';

        try {
            const user = verificationState.userData;
            
            // Check for real user indicators
            const hasBio = user.bio && user.bio.trim().length > 0;
            const hasLocation = user.location && user.location.trim().length > 0;
            const hasBlog = user.blog && user.blog.trim().length > 0;
            const hasCompany = user.company && user.company.trim().length > 0;
            
            const profileCheck = {
                name: 'Profile Completeness',
                passed: (hasBio || hasLocation || hasBlog || hasCompany),
                value: `${hasBio ? 'Bio  ' : ''}${hasLocation ? 'Location  ' : ''}${hasBlog ? 'Blog  ' : ''}${hasCompany ? 'Company  ' : ''}`,
                details: 'Profile has personal information'
            };

            verificationState.securityChecks.push(profileCheck);

            if (profileCheck.passed) {
                completeVerification();
            } else {
                showResult('Profile lacks personal information. Try another method.', 'warning');
            }

        } catch (error) {
            showResult('Profile verification failed. Try another method.', 'error');
        }
    }

    // VERIFICATION METHOD 3: Repository Analysis
    async function verifyViaRepository() {
        showResult('Analyzing repositories...', 'loading');
        verificationState.verificationMethod = 'repository_analysis';

        try {
            const reposUrl = `${CORS_PROXY}${encodeURIComponent(`https://api.github.com/users/${verificationState.currentUser}/repos?per_page=10&sort=updated`)}`;
            const reposRes = await fetch(reposUrl);

            if (!reposRes.ok) {
                throw new Error('Cannot fetch repositories');
            }

            const repos = await reposRes.json();
            
            // Analyze repository patterns
            const hasOriginalRepos = repos.some(repo => !repo.fork);
            const hasMultipleLanguages = new Set(repos.map(repo => repo.language)).size > 1;
            const hasRecentUpdates = repos.some(repo => {
                const updated = new Date(repo.updated_at);
                const daysSinceUpdate = (new Date() - updated) / (1000 * 60 * 60 * 24);
                return daysSinceUpdate < 30;
            });
            
            const repoCheck = {
                name: 'Repository Analysis',
                passed: hasOriginalRepos || hasMultipleLanguages || hasRecentUpdates,
                value: `${repos.length} repos, ${hasOriginalRepos ? 'Original repos  ' : ''}${hasRecentUpdates ? 'Recent updates  ' : ''}`,
                details: 'Repository patterns indicate real user'
            };

            verificationState.securityChecks.push(repoCheck);

            if (repoCheck.passed) {
                completeVerification();
            } else {
                showResult('Repository patterns not typical of real user. Try another method.', 'warning');
            }

        } catch (error) {
            showResult('Repository analysis failed. Try another method.', 'error');
        }
    }

    // COMPLETE VERIFICATION AND SHOW CLOUDY DASHBOARD
    function completeVerification() {
        updateStepUI(3, 'completed');
        verificationState.stepsCompleted.step3 = true;

        // Generate session token
        verificationState.sessionToken = generateSessionToken();
        
        // Store session in localStorage
        const sessionData = {
            user: verificationState.currentUser,
            token: verificationState.sessionToken,
            expiry: Date.now() + SESSION_DURATION,
            verifiedAt: new Date().toISOString(),
            method: verificationState.verificationMethod
        };
        
        localStorage.setItem('fee_xmd_session', JSON.stringify(sessionData));
        
        // Show success message
        showResult(' Account successfully verified! Loading your dashboard...', 'success');
        
        // Hide initial dashboard, show cloudy dashboard
        setTimeout(() => {
            initialDashboard.style.display = 'none';
            loadCloudyDashboard();
        }, 2000);
    }

    // LOAD CLOUDY DASHBOARD
    function loadCloudyDashboard() {
        // Update user information
        document.getElementById('verifiedUsername').textContent = verificationState.currentUser;
        document.getElementById('welcomeUsername').textContent = verificationState.currentUser;
        document.getElementById('userGithubLink').innerHTML = `
            <a href="https://github.com/${verificationState.currentUser}" target="_blank" style="color: var(--secondary);">
                @${verificationState.currentUser}
            </a>
        `;
        document.getElementById('sessionId').textContent = verificationState.sessionToken.substring(0, 12) + '...';
        document.getElementById('verificationTime').textContent = new Date().toLocaleString();
        
        // Calculate expiry time
        const expiry = new Date(Date.now() + SESSION_DURATION);
        document.getElementById('sessionExpiry').textContent = expiry.toLocaleString();
        
        // Show dashboard
        cloudyDashboard.classList.add('active');
    }

    // GENERATE SESSION TOKEN
    function generateSessionToken() {
        return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }

    // SHOW SECURITY DETAILS
    function showSecurityDetails(checks) {
        const detailsHtml = checks.map(check => `
            <div style="margin: 0.5rem 0; padding: 0.8rem; background: ${check.passed ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)'}; border-radius: 8px; border-left: 4px solid ${check.passed ? 'var(--accent)' : 'var(--danger)'};">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <strong>${check.name}</strong>
                    <span style="font-size: 0.9em;">${check.passed ? '' : ''}</span>
                </div>
                <div style="font-size: 0.9em; color: var(--text-secondary); margin-top: 0.3rem;">
                    ${check.value}  ${check.required}
                </div>
            </div>
        `).join('');

        verificationResult.innerHTML += `
            <div class="result-message result-info" style="margin-top: 1rem;">
                <i class="fas fa-shield-alt"></i>
                <div style="flex: 1;">
                    <strong>Security Analysis</strong>
                    <div style="margin-top: 0.8rem;">
                        ${detailsHtml}
                    </div>
                </div>
            </div>
        `;
    }

    // RESET VERIFICATION UI
    function resetVerificationUI() {
        [1, 2, 3].forEach(step => updateStepUI(step, 'pending'));
        accountVerification.style.display = 'none';
        platformsSection.style.display = 'none';
        startVerificationBtn.disabled = false;
    }

    // DEPLOY TO PLATFORM (Cloudy Dashboard)
    function deployToPlatform(platform) {
        if (!verificationState.currentUser || !verificationState.stepsCompleted.step3) {
            showResult('Please complete verification first', 'error');
            return;
        }

        const deployUrls = {
            heroku: `https://dashboard.heroku.com/new?template=https://github.com/${verificationState.currentUser}/${REPO_NAME}`,
            railway: `https://railway.app/new?template=https://github.com/${verificationState.currentUser}/${REPO_NAME}`,
            render: `https://render.com/deploy?repo=https://github.com/${verificationState.currentUser}/${REPO_NAME}`,
            koyeb: `https://app.koyeb.com/deploy?type=git&repository=https://github.com/${verificationState.currentUser}/${REPO_NAME}`,
            replit: `https://replit.com/github/${verificationState.currentUser}/${REPO_NAME}`
        };

        const platformNames = {
            heroku: 'Heroku',
            railway: 'Railway',
            render: 'Render',
            koyeb: 'Koyeb',
            replit: 'Replit'
        };

        showResult(` Opening ${platformNames[platform]} deployment...`, 'success');
        window.open(deployUrls[platform], '_blank');
    }

    // DASHBOARD FUNCTIONS
    function manageDeployment() {
        showResult('Opening deployment management...', 'info');
        // Implementation for deployment management
    }

    function viewFork() {
        if (verificationState.currentUser) {
            window.open(`https://github.com/${verificationState.currentUser}/${REPO_NAME}`, '_blank');
        }
    }

    function showSettings() {
        showResult('Settings panel coming soon...', 'info');
    }

    function resetSession() {
        localStorage.removeItem('fee_xmd_session');
        verificationState = {
            currentUser: null,
            userData: null,
            verificationStep: 1,
            stepsCompleted: { step1: false, step2: false, step3: false },
            sessionToken: null,
            verificationMethod: null,
            securityChecks: []
        };
        
        cloudyDashboard.classList.remove('active');
        initialDashboard.style.display = 'block';
        
        document.getElementById('githubUsername').value = '';
        resetVerificationUI();
        
        showResult('Session reset. Please verify again.', 'info');
    }

    // CHECK EXISTING SESSION ON LOAD
    function checkExistingSession() {
        const sessionData = localStorage.getItem('fee_xmd_session');
        
        if (sessionData) {
            try {
                const session = JSON.parse(sessionData);
                
                // Check if session is expired
                if (session.expiry > Date.now()) {
                    // Load existing session
                    verificationState.currentUser = session.user;
                    verificationState.sessionToken = session.token;
                    verificationState.stepsCompleted.step3 = true;
                    
                    initialDashboard.style.display = 'none';
                    loadCloudyDashboard();
                } else {
                    // Session expired
                    localStorage.removeItem('fee_xmd_session');
                }
            } catch (error) {
                localStorage.removeItem('fee_xmd_session');
            }
        }
    }

    // INITIALIZE
    document.addEventListener('DOMContentLoaded', () => {
        // Check for existing session
        checkExistingSession();
        
        // Attach event listeners
        startVerificationBtn.addEventListener('click', startVerification);
        
        // Enter key support
        document.getElementById('githubUsername').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                startVerification();
            }
        });
        
        // Focus on input
        document.getElementById('githubUsername').focus();
        
        // Initial message
        setTimeout(() => {
            showResult('Enter your GitHub username to start secure verification', 'info');
        }, 1000);
    });
</script>
</body>
</html> 
